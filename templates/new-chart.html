<div ng-controller="ChartController as cctrl" layout="row">

    <md-content layout-padding flex="50" style="overflow-x: hidden">
        <md-card md-theme="default">
            <md-card-title>
                <md-card-title-text>
                    <span class="md-headline">Preview</span>
                </md-card-title-text>
            </md-card-title>
            <md-card-content layout="row" layout-align="space-between">
                <canvas class="chart chart-line" chart-data="data" chart-labels="labels"
                        chart-series="series" chart-click="onClick" chart-colors="dataColors"></canvas>
            </md-card-content>
        </md-card>
    </md-content>
    <md-content layout-padding flex="50">
        <span class="md-headline">Basic Configurations</span>
        <form name="chartForm">
            <md-input-container class="md-block">
                <label>Title</label>
                <input required name="title">
            </md-input-container>
            <md-input-container class="md-block">
                <label>Program</label>
                <md-select ng-model="cctrl.program" ng-change="cctrl.refreshDataElements()">
                    <md-option ng-repeat="program in cctrl.programs" value="{{program.id}}">
                        {{program.displayName}}
                    </md-option>
                </md-select>
            </md-input-container>
            <div layout="row">
                <md-input-container flex="50">
                    <label>Dependant Axis (Y)</label>
                    <md-select ng-model="cctrl.yAxisDataElement">
                        <md-option ng-repeat="de in cctrl.dataElements" value="{{de.id}}">
                            {{de.name}}
                        </md-option>
                    </md-select>
                </md-input-container>
                <md-input-container flex="50">
                    <label>Independent Axis (X)</label>
                    <md-select ng-model="cctrl.xAxisPeriod">
                        <md-option ng-repeat="period in cctrl.xAxisPeriods" value="{{$index}}">
                            {{period}}
                        </md-option>
                    </md-select>
                </md-input-container>
            </div>
            <div>
                <span class="md-headline">Reference Data</span>
            </div>
            <div>
                <div dropzone="dropzoneConfig"
                     style="background-color: #fafafa;width: 100%;height: 60px;overflow: hidden;text-align: center;line-height: 60px">
                    Drop CSV file here
                </div>
            </div>
            <div layout="row">
                <table>
                    <tr ng-repeat="centile in cctrl.centiles">
                        <td>
                            <md-switch ng-model="centile.selected"
                                       ng-change="cctrl.applyData()">
                                {{centile.name}}
                            </md-switch>
                        </td>
                        <td>
                            <div md-color-picker ng-model="centile.color" ng-change="cctrl.applyData()"></div>
                        </td>
                    </tr>
                </table>
            </div>
        </form>
    </md-content>
</div>